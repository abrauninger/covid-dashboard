## -*- coding: utf-8 -*-

<html>

<head>
<title>COVID-19 metrics for King County, WA</title>

<meta name="viewport" content="width=device-width; initial-scale=1.0;" />

<link href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro&display=swap" rel="stylesheet">

<style>
	body {
		font-family: 'Source Serif Pro', serif;
	}

	table {
		margin-top: 24px;
		margin-bottom: 24px;
		border-collapse: collapse;
	}

	tr.header-row {
		border-bottom: 1px solid #ccc;
	}

	tr.not-bottom-row {
		border-bottom: 1px solid #ccc;
	}

	th {
		text-align: left;
		padding-right: 20px;
	}

	th.not-first-column {
		padding-left: 20px;
	}

	td {
		vertical-align: top;
	}

	td.not-first-column {
		padding-left: 20px;
		padding-right: 20px;
	}

	ul {
		padding-left: 20px;
	}

	.body-container {
		max-width: 1200px;
	}

	.plot-container {
		height: 200px;
	}

	.source-attribution {
		text-align: right;
		font-family: 'Source Sans', sans-serif;
		font-size: 12px;
		font-style: italic;
		margin-bottom: 28px;
	}

	code {
		font-size: 16px;
		background-color: #eee;
		padding-left: 6px;
		padding-right: 6px;
	}

	.mask-up-header {
		margin-top: 36px;
	}

	.mask-up-img {
		max-width: 100%;
		display: block;
		margin-left: auto;
		margin-right: auto;
	}

	@media only screen and (min-width: 600px) {
		.mask-up-img  {
			max-width: 600px;
		}
	}

	@media only screen and (min-width: 800px) {
		.plot-container {
			height: 300px;
		}

		.source-attribution {
			margin-bottom: 40px;
		}
	}

	@media only screen and (max-width: 800px) {
		/* On mobile screens, make sure the "data sources" table doesn't blow up the layout of the whole page. */
		/* See https://css-tricks.com/responsive-data-tables/ */

		/* Force table to not be like tables anymore */
		table, thead, tbody, th, td, tr { 
			display: block;
		}

		table {
			border-top: 1px solid #ccc;
			border-bottom: 1px solid #ccc;
			margin-bottom: 48px;
		}
		
		/* Hide table headers (but not display: none;, for accessibility) */
		thead tr { 
			position: absolute;
			top: -9999px;
			left: -9999px;
		}

		td { 
			/* Behave  like a "row" */
			border: none;
			position: relative;
			padding-left: 40%; 
			font-size: 90%;
		}

		td.not-first-column {
			padding-left: inherit;
			padding-right: inherit;
			border: none;
			position: relative;
			padding-left: 40%; 
		}

		td:before { 
			position: absolute;
			left: 6px;
			width: 35%; 
			padding-right: 10px; 
			white-space: nowrap;
			vertical-align: top;
			font-weight: bold;
		}

		/* Label the data */
		td:nth-of-type(1):before { content: "Source"; }
		td:nth-of-type(2):before { content: "Used for"; }
		td:nth-of-type(3):before { content: "Availability"; }
		td:nth-of-type(4):before { content: "Last pulled"; }

		ul {
			margin-top: 0;
			margin-bottom: 0;
		}
	}
</style>

</head>

<body>

<div class="body-container">

<h1>COVID-19 metrics for King County, WA</h1>

<p>Last updated <strong>${page_updated_date}</strong>.</p>

<h2>Data sources</h2>

<table>
	<thead>
		<tr class="header-row"><th>Source</th><th class="not-first-column">Used for</th><th class="not-first-column">Availability</th><th class="not-first-column">Last pulled</th></tr>
	</thead>
	<tbody>
		<tr class="not-bottom-row"><td><a href="https://github.com/nytimes/covid-19-data">New York Times</a></td><td class="not-first-column"><ul><li>New cases</li><li>Deaths</li></ul></td><td class="not-first-column">Daily</td><td class="not-first-column"><strong>${nytimes_pull_date}</strong></td></tr>
		<tr><td><a href="https://www.kingcounty.gov/depts/health/covid-19/data/daily-summary.aspx">King County Department of Health</a></td><td class="not-first-column"><ul><li>Hospitalizations</li><li>Tests</li></ul></td><td class="not-first-column">Every Tuesday</td><td class="not-first-column"><strong>${king_county_pull_date}</strong></td></tr>
	</tbody>
</table>

<h2>New cases</h2>

<div class="plot-container">
${new_cases_plot}
</div>
<p class="source-attribution">Source: New York Times</p>

<h2>Hospitalizations</h2>

<div class="plot-container">
${hospitalizations_plot}
</div>
<p class="source-attribution">Source: King County Department of Health</p>

<h2>Deaths</h2>

<div class="plot-container">
${deaths_plot}
</div>
<p class="source-attribution">Source: New York Times</p>

<h2>Tests</h2>

<div class="plot-container">
${tests_plot}
</div>
<p class="source-attribution">Source: King County Department of Health</p>

<h2>Positive test rate</h2>

<div class="plot-container">
${positive_test_rate_plot}
</div>
<p class="source-attribution">Sources: New York Times, King County Department of Health</p>

<h2>Source code</h2>

<p>The code that generated this page is available in the <a href="https://github.com/abrauninger/covid-dashboard"><code>covid-dashboard</code></a> repository on GitHub.</p>

<h2 class="mask-up-header">Wear a mask</h2>

<p>Stay healthy out there.</p>

<a href="https://coronavirus.wa.gov/masks"><img class="mask-up-img" src="DOH-COVID19-MaskUp-970x250-ENG.gif" /></a>

</div>

</body>

</html>